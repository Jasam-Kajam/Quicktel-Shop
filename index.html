<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Quicktel Bundles</title>
    <script src="https://js.paystack.co/v1/inline.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #f1f3f6;
            margin: 0;
            padding: 0;
        }
        .header {
            background: #fff;
            padding: 15px;
            text-align: center;
            font-weight: bold;
            font-size: 20px;
            border-bottom: 1px solid #ddd;
        }
        .bundle-card {
            background: #fff;
            margin: 15px;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0,0,0,0.05);
        }
        .bundle-title {
            font-size: 24px;
            font-weight: bold;
            color: #111;
        }
        .star {
            color: #008000; /* Green color */
            text-shadow: 0 0 5px #008000, 0 0 10px #008000;
        }
        .bundle-desc {
            color: #666;
            margin: 5px 0;
        }
        .tag {
            background: #f1f3f6;
            display: inline-block;
            padding: 5px 10px;
            font-size: 12px;
            border-radius: 15px;
            margin-bottom: 10px;
            color: #333;
        }
        .select-btn {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px;
            width: 100%;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
        }
        .modal {
            display: none;
            position: fixed;
            z-index: 10;
            left: 0; top: 0;
            width: 100%; height: 100%;
            background-color: rgba(0,0,0,0.5);
        }
        .modal-content {
            background-color: #fff;
            margin: 15% auto;
            padding: 20px;
            border-radius: 8px;
            width: 80%;
            max-width: 400px;
        }
  <div id="overlay" style="
  display: none;
  position: fixed;
  top: 0; left: 0; right: 0; bottom: 0;
  background-color: rgba(0, 0, 0, 0.7);
  z-index: 9998;
"></div>
        }
        .close {
            float: right;
            font-size: 24px;
            cursor: pointer;
        }
    </style>
</head>
<body>

<div class="header">QUICKTEL BUNDLES</div>

<div class="bundle-card">
    <div class="tag">
  <span class="star">⭐</span> Popular now
</div>
    <div class="bundle-title">KSh 50</div>
    <div class="bundle-desc">175 MB · No expiry & WhatsApp</div>
    <button class="select-btn" onclick="openModal(50, '175MB - No Expiry')">Select</button>
</div>

<div class="bundle-card">
    <div class="tag">Good deal</div>
    <div class="bundle-title">KSh 20</div>
    <div class="bundle-desc">1GB · 1 Hour</div>
    <button class="select-btn" onclick="openModal(20, '1GB - 1 Hour')">Select</button>
</div>

    <div class="bundle-card">
      <div class="tag">Good deal</div>
      <div class="price">KSh20</div>
      <div class="details">Data Pack · 1GB · 1 hour</div>
      <div class="details">Sh20=1GB 1hr</div>
      <button class="select-btn" onclick="openModal(20, '1GB - 1 Hour')">Select</button>
    </div>

    <div class="bundle-card">
      <div class="price">KSh100</div>
      <div class="details">Data Pack · 2GB · 3 days</div>
      <div class="details">Sh100=2GB 3Days</div>
      <button class="select-btn" onclick="openModal(100, '2GB - 3 Days')">Select</button>
    </div>

    <div class="bundle-card">
      <div class="tag">
  <span class="star">⭐</span> Popular now
</div>
      <div class="price">KSh25</div>
      <div class="details">Data Pack · 300MB · 24 hours</div>
      <div class="details">Sh25=300MB 24hr</div>
      <button class="select-btn" onclick="openModal(25, '300MB - 24 Hours')">Select</button>
    </div>

    <div class="bundle-card">
      <div class="tag">
  <span class="star">⭐</span> Popular now
</div>
      <div class="price">KSh15</div>
      <div class="details">Data Pack · 500MB · 1 hour</div>
      <div class="details">Sh15=500MB 1hr</div>
      <button class="select-btn" onclick="openModal(15, '500MB - 1 Hour')">Select</button>
    </div>

    <div class="bundle-card">
      <div class="price">KSh1,000</div>
      <div class="details">Data Pack · 5GB</div>
      <div class="details">No Expiry 5GB and Whatsapp</div>
      <button class="select-btn" onclick="openModal(1000, '5GB No Expiry + Whatsapp')">Select</button>
    </div>

    <!-- Previous bundles -->
    <div class="bundle-card">
      <div class="details">No Expiry 1.25GB and WhatsApp</div>
      <div class="price">KSh150</div>
      <div class="details">Data Pack · 1.25GB</div>
      <button class="select-btn" onclick="openModal(150, '1.25GB + WhatsApp')">Select</button>
    </div>

    <div class="bundle-card">
      <div class="price">KSh50</div>
      <div class="details">Data Pack · 175MB</div>
      <div class="details">No Expiry 175MB and WhatsApp</div>
      <button class="select-btn" onclick="openModal(50, '175MB + WhatsApp')">Select</button>
    </div>

    <div class="bundle-card">
      <div class="price">KSh250</div>
      <div class="details">Data Pack · 2GB · 30 days</div>
      <div class="details">Sh250=2GB 30Days</div>
      <button class="select-btn" onclick="openModal(250, '2GB - 30 Days')">Select</button>
    </div>

    <div class="bundle-card">
      <div class="price">KSh200</div>
      <div class="details">Data Pack · 1GB · 7 days</div>
      <div class="details">Sh200=1GB 7Days</div>
      <button class="select-btn" onclick="openModal(200, '1GB - 7 Days')">Select</button>
    </div>

    <div class="bundle-card">
      <div class="tag">
  <span class="star">⭐</span> Popular now
</div>
      <div class="price">KSh5</div>
      <div class="details">Data Pack · 10MB</div>
      <div class="details">No Expiry 10MB</div>
      <button class="select-btn" onclick="openModal(5, '10MB No Expiry')">Select</button>
    </div>

    <div class="bundle-card">
      <div class="price">KSh30</div>
      <div class="details">Data Pack · 500MB</div>
      <div class="details">Sh30=500MB till midnight</div>
      <button class="select-btn" onclick="openModal(30, '500MB till midnight')">Select</button>
    </div>


<!-- Modal -->
<div id="paymentModal" class="modal">
    <div class="modal-content">
        <span class="close" onclick="closeModal()">&times;</span>
        <h3>Enter Phone Number</h3>
        <input type="text" id="phoneNumber" placeholder="e.g 0712345678" style="width: 100%; padding: 10px; margin-bottom: 15px; font-size: 16px;">
        <button class="select-btn" onclick="startPay()">Proceed to Pay</button>
    </div>
</div>

<script>
    let selectedAmount = 0;
    let selectedBundle = '';

    function openModal(amount, bundle) {
        selectedAmount = amount;
        selectedBundle = bundle;
        document.getElementById('paymentModal').style.display = 'block';
    }

    function closeModal() {
        document.getElementById('paymentModal').style.display = 'none';
    }

    function startPay() {
    const phone = document.getElementById('phoneNumber').value.trim();
    if (!phone.match(/^07\d{8}$/)) {
        alert('Please enter a valid Safaricom number.');
        return;
    }
    closeModal();

    // Show the full screen overlay
    document.getElementById('overlay').style.display = 'block';

    let handler = PaystackPop.setup({
        key: 'pk_live_3b95d82d975d8cd88f2e0059b1d6dca62c1db036',
        email: 'quicktel@customer.com',
        amount: selectedAmount * 100,
        currency: "KES",
        callback: function(response) {
            document.getElementById('overlay').style.display = 'none';
            verifyPayment(response.reference, phone);
        },
        onClose: function() {
            document.getElementById('overlay').style.display = 'none';
            alert('Transaction closed.');
        }
    });

    handler.openIframe();
}

    async function verifyPayment(reference, phone) {
        const response = await fetch('http://localhost:5000/verify-payment', {
            method: 'POST',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify({
                reference: reference,
                bundle: selectedBundle,
                phone: phone
            })
        });

        const data = await response.json();
        if (response.ok) {
            alert(data.message);
        } else {
            alert('Payment failed: ' + data.message);
        }
    }
</script>

</body>
</html>